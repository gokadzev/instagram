"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9743],{9743:($,u,c)=>{c.r(u),c.d(u,{ConversationsModule:()=>L});var g=c(6895),_=c(4228),C=c(5861),n=c(8274),s=c(877),p=c(2014),v=c(4354),l=c(4006),h=c(6400),m=c(4032);function x(t,i){if(1&t){const e=n.EpF();n.TgZ(0,"ion-header",2)(1,"ion-toolbar")(2,"ion-buttons",4)(3,"ion-button",10),n.NdJ("click",function(){n.CHM(e);const a=n.oxw();return n.KtG(a.dismiss())}),n._UZ(4,"ion-icon",11),n.qZA(),n.TgZ(5,"ion-avatar",12),n._UZ(6,"img",13),n.qZA()(),n.TgZ(7,"ion-title",14),n._uU(8),n.qZA(),n.TgZ(9,"ion-buttons",7)(10,"ion-button"),n._UZ(11,"ion-icon",15),n.qZA(),n.TgZ(12,"ion-button"),n._UZ(13,"ion-icon",16),n.qZA()()()()}if(2&t){const e=n.oxw();n.xp6(6),n.Q6J("src",e.conversationInfo.avatar,n.LSH),n.xp6(2),n.Oqu(e.conversationInfo.receiver)}}function b(t,i){if(1&t&&(n.TgZ(0,"div",30)(1,"ion-avatar",31),n._UZ(2,"img",32),n.qZA()()),2&t){const e=n.oxw(3);n.xp6(2),n.Q6J("src",e.conversationInfo.avatar,n.LSH)}}function P(t,i){if(1&t&&(n.TgZ(0,"div",33),n._uU(1),n.qZA()),2&t){const e=n.oxw().$implicit;n.xp6(1),n.hij(" ",e.message," ")}}function Z(t,i){if(1&t&&n._UZ(0,"ion-icon",34),2&t){const e=n.oxw().$implicit;n.Q6J("name",e.message)}}function M(t,i){if(1&t&&n._UZ(0,"img",32),2&t){const e=n.oxw().$implicit;n.Q6J("src",e.message,n.LSH)}}function I(t,i){1&t&&(n.TgZ(0,"div",35),n._UZ(1,"ion-icon",36),n.qZA())}function T(t,i){1&t&&(n.TgZ(0,"div",37),n._uU(1," Seen "),n.qZA())}const O=function(t){return{"chat-item-sender":t}},y=function(t){return{"bubble-image":t}};function A(t,i){if(1&t&&(n.TgZ(0,"div",20)(1,"div",21),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.TgZ(4,"div",22),n.YNc(5,b,3,1,"div",23),n.TgZ(6,"div",24),n.YNc(7,P,2,1,"div",25),n.YNc(8,Z,1,1,"ion-icon",26),n.YNc(9,M,1,1,"img",27),n.qZA(),n.YNc(10,I,2,0,"div",28),n.qZA(),n.YNc(11,T,2,0,"div",29),n.qZA()),2&t){const e=i.$implicit,o=n.oxw(2);n.Q6J("ngClass",n.VKq(12,O,e.sender==o.loggedUserInfo.username)),n.xp6(2),n.AsE(" ",o.commonFunctions.timeSince(e.time)," ",n.lcZ(3,10,"Ago")," "),n.xp6(3),n.Q6J("ngIf",e.sender!=o.loggedUserInfo.username),n.xp6(1),n.Q6J("ngClass",n.VKq(14,y,"image"===e.type)),n.xp6(1),n.Q6J("ngIf","message"===e.type),n.xp6(1),n.Q6J("ngIf","emoji"===e.type),n.xp6(1),n.Q6J("ngIf","image"===e.type),n.xp6(1),n.Q6J("ngIf",e.sender!=o.loggedUserInfo.username&&"image"===e.type),n.xp6(1),n.Q6J("ngIf",e.sender==o.loggedUserInfo.username)}}function J(t,i){if(1&t&&(n.TgZ(0,"ion-content",17)(1,"div",18),n.YNc(2,A,12,16,"div",19),n.qZA()()),2&t){const e=n.oxw();n.Q6J("scrollEvents",!0),n.xp6(2),n.Q6J("ngForOf",e.conversation)}}function U(t,i){1&t&&(n.TgZ(0,"ion-button",38),n._UZ(1,"ion-icon",39),n.qZA())}function F(t,i){1&t&&(n.TgZ(0,"ion-button",38),n._UZ(1,"ion-icon",40),n.qZA())}function Q(t,i){1&t&&(n.TgZ(0,"ion-buttons",41)(1,"ion-button"),n._UZ(2,"ion-icon",42),n.qZA(),n.TgZ(3,"ion-button"),n._UZ(4,"ion-icon",43),n.qZA(),n.TgZ(5,"ion-button"),n._UZ(6,"ion-icon",44),n.qZA()())}function w(t,i){if(1&t){const e=n.EpF();n.TgZ(0,"ion-button",10),n.NdJ("click",function(){n.CHM(e);const a=n.oxw();return n.KtG(a.sendMessage())}),n.TgZ(1,"ion-text",45)(2,"h6",46),n._uU(3,"Send"),n.qZA()()()}}let q=(()=>{class t{constructor(e,o,a){this.modalController=e,this.dataManager=o,this.commonFunctions=a,this.messageInput="",this.isSender=!1}ngOnInit(){}ionViewWillEnter(){this.dataManager.getLoggedInUser(e=>{this.loggedUserInfo=e}),this.conversationInfo=this.conversation[0]}toggleFocus(e){this.isFocus=e}sendMessage(){this.dataManager.addMessage(1,"assets/imgs/logo.png",this.loggedUserInfo.username,"Jose",this.messageInput,new Date,"message",e=>{this.conversation=e,this.messageInput=""})}dismiss(){this.modalController.dismiss({dismissed:!0})}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(s.IN),n.Y36(p.L),n.Y36(v.i))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-conversation"]],inputs:{conversation:"conversation",message:"message"},decls:11,vars:7,consts:[["class","ion-no-border",4,"ngIf"],["class","ion-padding",3,"scrollEvents",4,"ngIf"],[1,"ion-no-border"],[1,"bottom-messager"],["slot","start"],["class","start-action",4,"ngIf"],["placeholder","Message",1,"message-input",3,"ngModel","ngModelChange","ionFocus","ionBlur","keyup.enter"],["slot","end"],["item-right","",4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"],["name","arrow-back-outline"],[1,"avatar-sm","ion-margin-start"],["alt","",3,"src"],["size","small",1,"ion-text-left"],["slot","icon-only","name","call-outline"],["slot","icon-only","name","videocam-outline"],[1,"ion-padding",3,"scrollEvents"],[1,"chat-list"],["class","chat-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"chat-item",3,"ngClass"],[1,"chat-timestamp"],[1,"chat-item-content"],["class","chat-avatar",4,"ngIf"],[1,"chat-item-bubble",3,"ngClass"],["class","chat-body",4,"ngIf"],["class","md-emoji","slot","icon-only",3,"name",4,"ngIf"],[3,"src",4,"ngIf"],["class","chat-message-reaction",4,"ngIf"],["class","chat-message-status",4,"ngIf"],[1,"chat-avatar"],[1,"avatar-sm"],[3,"src"],[1,"chat-body"],["slot","icon-only",1,"md-emoji",3,"name"],[1,"chat-message-reaction"],["name","share-outline"],[1,"chat-message-status"],[1,"start-action"],["slot","icon-only","name","camera","color","light"],["name","happy","color","light"],["item-right",""],["slot","icon-only","name","mic-outline"],["slot","icon-only","name","image-outline"],["slot","icon-only","name","happy-outline"],["color","primary"],[2,"text-transform","none","font-weight","600","font-family","inherit"]],template:function(e,o){1&e&&(n.YNc(0,x,14,2,"ion-header",0),n.YNc(1,J,3,2,"ion-content",1),n.TgZ(2,"ion-footer",2)(3,"ion-toolbar",3)(4,"ion-buttons",4),n.YNc(5,U,2,0,"ion-button",5),n.YNc(6,F,2,0,"ion-button",5),n.qZA(),n.TgZ(7,"ion-input",6),n.NdJ("ngModelChange",function(r){return o.messageInput=r})("ionFocus",function(){return o.toggleFocus(!0)})("ionBlur",function(){return o.toggleFocus(!1)})("keyup.enter",function(){return o.sendMessage()}),n.qZA(),n.TgZ(8,"ion-buttons",7),n.YNc(9,Q,7,0,"ion-buttons",8),n.YNc(10,w,4,0,"ion-button",9),n.qZA()()()),2&e&&(n.Q6J("ngIf",o.conversationInfo),n.xp6(1),n.Q6J("ngIf",o.conversationInfo&&o.loggedUserInfo),n.xp6(4),n.Q6J("ngIf",!o.isFocus),n.xp6(1),n.Q6J("ngIf",o.isFocus),n.xp6(1),n.Q6J("ngModel",o.messageInput),n.xp6(2),n.Q6J("ngIf",""==o.messageInput),n.xp6(1),n.Q6J("ngIf",""!=o.messageInput))},dependencies:[g.mk,g.sg,g.O5,s.BJ,s.YG,s.Sm,s.W2,s.fr,s.Gu,s.gu,s.pK,s.yW,s.sr,s.wd,s.j9,l.JJ,l.On,h.L,m.X$],styles:[".chat-list[_ngcontent-%COMP%]   .chat-item[_ngcontent-%COMP%]{margin-bottom:8px}.chat-list[_ngcontent-%COMP%]   .chat-item.chat-item-sender[_ngcontent-%COMP%]{text-align:right}.chat-list[_ngcontent-%COMP%]   .chat-item.chat-item-sender[_ngcontent-%COMP%]   .chat-item-content[_ngcontent-%COMP%]{justify-content:flex-end}.chat-list[_ngcontent-%COMP%]   .chat-item.chat-item-sender[_ngcontent-%COMP%]   .chat-body[_ngcontent-%COMP%]{background:#d5d5d5;color:var(--ion-color-dark);border-radius:20px;border-color:transparent}.chat-list[_ngcontent-%COMP%]   .chat-timestamp[_ngcontent-%COMP%]{text-align:center;font-size:13px;padding:8px;color:var(--ion-color-medium);text-transform:uppercase}.chat-list[_ngcontent-%COMP%]   .chat-message-status[_ngcontent-%COMP%]{font-size:13px;color:var(--ion-color-medium);margin-right:8px}.chat-list[_ngcontent-%COMP%]   .chat-item-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-bottom:4px}.chat-list[_ngcontent-%COMP%]   .chat-item-content[_ngcontent-%COMP%]   .chat-avatar[_ngcontent-%COMP%]{margin-right:8px;align-self:flex-end}.chat-list[_ngcontent-%COMP%]   .chat-item-content[_ngcontent-%COMP%]   .chat-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:inline-block;width:100%;max-width:35px;height:35px;object-fit:cover;border-radius:50%}.chat-list[_ngcontent-%COMP%]   .chat-item-bubble[_ngcontent-%COMP%]{position:relative;max-width:75%}.chat-list[_ngcontent-%COMP%]   .chat-item-bubble[_ngcontent-%COMP%]   .chat-body[_ngcontent-%COMP%]{display:inline-block;background:var(--ion-color-light);border-radius:20px;padding:9px 16px;white-space:normal;max-width:100%;text-align:left}.chat-list[_ngcontent-%COMP%]   .chat-item-bubble.bubble-image[_ngcontent-%COMP%]{font-size:0}.chat-list[_ngcontent-%COMP%]   .chat-item-bubble.bubble-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:480px;border-radius:16px}.avatar-sm[_ngcontent-%COMP%]{width:35px;height:35px}.start-action[_ngcontent-%COMP%]{width:30px!important;height:30px!important;border-radius:50%;background-color:#045de9;background-image:linear-gradient(315deg,#045de9 0%,#09c6f9 74%);--padding-end: 5px!important;--padding-start: 5px!important}.bottom-messager[_ngcontent-%COMP%]{border:1px solid #d5d5d5;width:95%;margin:0 auto 10px;border-radius:30px;padding:0 10px}"]}),t})(),N=(()=>{class t{constructor(e){this.commonFunctions=e}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(v.i))},t.\u0275cmp=n.Xpm({type:t,selectors:[["conversation-item"]],inputs:{message:"message"},decls:8,vars:6,consts:[[3,"src"],[1,"time"]],template:function(e,o){1&e&&(n.TgZ(0,"ion-item")(1,"ion-avatar"),n._UZ(2,"img",0),n.qZA(),n.TgZ(3,"ion-label"),n._uU(4),n.qZA(),n.TgZ(5,"p",1),n._uU(6),n.ALo(7,"translate"),n.qZA()()),2&e&&(n.xp6(2),n.Q6J("src",o.message.avatar,n.LSH),n.xp6(2),n.hij(" ",o.message.sender," "),n.xp6(2),n.AsE("",o.commonFunctions.timeSince(o.message.time)," ",n.lcZ(7,4,"Ago"),""))},dependencies:[s.BJ,s.Ie,s.Q$,h.L,m.X$],styles:["ion-avatar[_ngcontent-%COMP%]{margin-right:10px}"]}),t})();function Y(t,i){if(1&t){const e=n.EpF();n.TgZ(0,"conversation-item",3),n.NdJ("click",function(){const r=n.CHM(e).$implicit,d=n.oxw();return n.KtG(d.openConversation(r.id))}),n.qZA()}2&t&&n.Q6J("message",i.$implicit)}const S=[{path:"",component:(()=>{class t{constructor(e,o){this.modalController=e,this.dataManager=o,this.conversationValue="",this.loggedUserUsername="user123",this.conversations=[],this.conversationsSave=this.conversations,this.removeDuplicates=(a,r)=>a.reduce((d,f)=>[...d.filter(j=>j[r]!==f[r]),f],[])}ngOnInit(){this.dataManager.getConversations(e=>{this.conversations=e,this.conversationPeople=this.removeDuplicates(this.conversations,"sender"),this.conversationPeople.splice(this.conversationPeople.findIndex(({sender:o})=>o==this.loggedUserUsername),1)})}searchConversation(e){this.conversationValue=e.target.value,this.conversations=""==this.conversationValue?this.conversationsSave:this.conversations.filter(o=>o.sender.slice(0,this.conversationValue.length)===this.conversationValue)}openConversation(e){var o=this;return(0,C.Z)(function*(){return yield(yield o.modalController.create({component:q,cssClass:"conversationPage",componentProps:{conversation:o.conversations.filter(r=>r.id==e)}})).present()})()}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(s.IN),n.Y36(p.L))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-conversations"]],decls:7,vars:4,consts:[[1,"ion-no-border"],[3,"placeholder","input"],[3,"message","click",4,"ngFor","ngForOf"],[3,"message","click"]],template:function(e,o){1&e&&(n.TgZ(0,"ion-content")(1,"ion-header",0)(2,"ion-toolbar")(3,"ion-searchbar",1),n.NdJ("input",function(r){return o.searchConversation(r)}),n.ALo(4,"translate"),n.qZA()()(),n.TgZ(5,"ion-list"),n.YNc(6,Y,1,1,"conversation-item",2),n.qZA()()),2&e&&(n.xp6(3),n.Q6J("placeholder",n.lcZ(4,2,"Search")),n.xp6(3),n.Q6J("ngForOf",o.conversationPeople))},dependencies:[g.sg,s.W2,s.Gu,s.q_,s.VI,s.sr,s.j9,N,m.X$],styles:["ion-searchbar[_ngcontent-%COMP%]{--box-shadow: none}ion-searchbar[_ngcontent-%COMP%]     .searchbar-clear-icon{display:none!important}"]}),t})()}];let k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[_.Bz.forChild(S),_.Bz]}),t})(),L=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[g.ez,l.u5,s.Pc,k]}),t})()}}]);