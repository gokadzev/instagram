"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6926],{6926:($,p,r)=>{r.r(p),r.d(p,{ConversationsModule:()=>L});var l=r(9618),g=r(336),C=r(7036),n=r(854),i=r(7397),_=r(416),v=r(2673),m=r(9091),h=r(54),d=r(6135);function b(t,s){if(1&t){const o=n.EpF();n.TgZ(0,"ion-header",2)(1,"ion-toolbar")(2,"ion-buttons",4)(3,"ion-button",10),n.NdJ("click",function(){n.CHM(o);const a=n.oxw();return n.KtG(a.dismiss())}),n._UZ(4,"ion-icon",11),n.qZA(),n.TgZ(5,"ion-avatar",12),n._UZ(6,"img",13),n.qZA()(),n.TgZ(7,"ion-title",14),n._uU(8),n.qZA(),n.TgZ(9,"ion-buttons",7)(10,"ion-button"),n._UZ(11,"ion-icon",15),n.qZA(),n.TgZ(12,"ion-button"),n._UZ(13,"ion-icon",16),n.qZA()()()()}if(2&t){const o=n.oxw();n.xp6(6),n.Q6J("src",o.conversationInfo.avatar,n.LSH),n.xp6(2),n.Oqu(o.conversationInfo.receiver)}}function Z(t,s){if(1&t&&(n.TgZ(0,"div",30)(1,"ion-avatar",31),n._UZ(2,"img",32),n.qZA()()),2&t){const o=n.oxw(3);n.xp6(2),n.Q6J("src",o.conversationInfo.avatar,n.LSH)}}function x(t,s){if(1&t&&(n.TgZ(0,"div",33),n._uU(1),n.qZA()),2&t){const o=n.oxw().$implicit;n.xp6(1),n.hij(" ",o.message," ")}}function P(t,s){if(1&t&&n._UZ(0,"ion-icon",34),2&t){const o=n.oxw().$implicit;n.Q6J("name",o.message)}}function M(t,s){if(1&t&&n._UZ(0,"img",32),2&t){const o=n.oxw().$implicit;n.Q6J("src",o.message,n.LSH)}}function T(t,s){1&t&&(n.TgZ(0,"div",35),n._UZ(1,"ion-icon",36),n.qZA())}function I(t,s){1&t&&(n.TgZ(0,"div",37),n._uU(1," Seen "),n.qZA())}const O=function(t){return{"chat-item-sender":t}},y=function(t){return{"bubble-image":t}};function A(t,s){if(1&t&&(n.TgZ(0,"div",20)(1,"div",21),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.TgZ(4,"div",22),n.YNc(5,Z,3,1,"div",23),n.TgZ(6,"div",24),n.YNc(7,x,2,1,"div",25),n.YNc(8,P,1,1,"ion-icon",26),n.YNc(9,M,1,1,"img",27),n.qZA(),n.YNc(10,T,2,0,"div",28),n.qZA(),n.YNc(11,I,2,0,"div",29),n.qZA()),2&t){const o=s.$implicit,e=n.oxw(2);n.Q6J("ngClass",n.VKq(12,O,o.sender==e.loggedUserInfo.username)),n.xp6(2),n.AsE(" ",e.commonFunctions.timeSince(o.time)," ",n.lcZ(3,10,"Ago")," "),n.xp6(3),n.Q6J("ngIf",o.sender!=e.loggedUserInfo.username),n.xp6(1),n.Q6J("ngClass",n.VKq(14,y,"image"===o.type)),n.xp6(1),n.Q6J("ngIf","message"===o.type),n.xp6(1),n.Q6J("ngIf","emoji"===o.type),n.xp6(1),n.Q6J("ngIf","image"===o.type),n.xp6(1),n.Q6J("ngIf",o.sender!=e.loggedUserInfo.username&&"image"===o.type),n.xp6(1),n.Q6J("ngIf",o.sender==e.loggedUserInfo.username)}}function U(t,s){if(1&t&&(n.TgZ(0,"ion-content",17)(1,"div",18),n.YNc(2,A,12,16,"div",19),n.qZA()()),2&t){const o=n.oxw();n.Q6J("scrollEvents",!0),n.xp6(2),n.Q6J("ngForOf",o.conversation)}}function J(t,s){1&t&&(n.TgZ(0,"ion-button",38),n._UZ(1,"ion-icon",39),n.qZA())}function q(t,s){1&t&&(n.TgZ(0,"ion-button",38),n._UZ(1,"ion-icon",40),n.qZA())}function F(t,s){1&t&&(n.TgZ(0,"ion-buttons",41)(1,"ion-button"),n._UZ(2,"ion-icon",42),n.qZA(),n.TgZ(3,"ion-button"),n._UZ(4,"ion-icon",43),n.qZA(),n.TgZ(5,"ion-button"),n._UZ(6,"ion-icon",44),n.qZA()())}function w(t,s){if(1&t){const o=n.EpF();n.TgZ(0,"ion-button",10),n.NdJ("click",function(){n.CHM(o);const a=n.oxw();return n.KtG(a.sendMessage())}),n.TgZ(1,"ion-text",45)(2,"h6",46),n._uU(3,"Send"),n.qZA()()()}}let Q=(()=>{class t{constructor(o,e,a){this.modalController=o,this.dataManager=e,this.commonFunctions=a,this.messageInput="",this.isSender=!1}ngOnInit(){}ionViewWillEnter(){this.dataManager.getLoggedInUser(o=>{this.loggedUserInfo=o}),this.conversationInfo=this.conversation[0]}toggleFocus(o){this.isFocus=o}sendMessage(){this.dataManager.addMessage(1,"assets/imgs/logo.png",this.loggedUserInfo.username,"Jose",this.messageInput,new Date,"message",o=>{this.conversation=o,this.messageInput=""})}dismiss(){this.modalController.dismiss({dismissed:!0})}}return t.\u0275fac=function(o){return new(o||t)(n.Y36(i.IN),n.Y36(_.L),n.Y36(v.i))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-conversation"]],inputs:{conversation:"conversation",message:"message"},decls:11,vars:7,consts:[["class","ion-no-border",4,"ngIf"],["class","ion-padding",3,"scrollEvents",4,"ngIf"],[1,"ion-no-border"],[1,"bottom-messager"],["slot","start"],["class","start-action",4,"ngIf"],["placeholder","Message",1,"message-input",3,"ngModel","ngModelChange","ionFocus","ionBlur","keyup.enter"],["slot","end"],["item-right","",4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"],["name","arrow-back-outline"],[1,"avatar-sm","ion-margin-start"],["alt","",3,"src"],["size","small",1,"ion-text-left"],["slot","icon-only","name","call-outline"],["slot","icon-only","name","videocam-outline"],[1,"ion-padding",3,"scrollEvents"],[1,"chat-list"],["class","chat-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"chat-item",3,"ngClass"],[1,"chat-timestamp"],[1,"chat-item-content"],["class","chat-avatar",4,"ngIf"],[1,"chat-item-bubble",3,"ngClass"],["class","chat-body",4,"ngIf"],["class","md-emoji","slot","icon-only",3,"name",4,"ngIf"],[3,"src",4,"ngIf"],["class","chat-message-reaction",4,"ngIf"],["class","chat-message-status",4,"ngIf"],[1,"chat-avatar"],[1,"avatar-sm"],[3,"src"],[1,"chat-body"],["slot","icon-only",1,"md-emoji",3,"name"],[1,"chat-message-reaction"],["name","share-outline"],[1,"chat-message-status"],[1,"start-action"],["slot","icon-only","name","camera","color","light"],["name","happy","color","light"],["item-right",""],["slot","icon-only","name","mic-outline"],["slot","icon-only","name","image-outline"],["slot","icon-only","name","happy-outline"],["color","primary"],[2,"text-transform","none","font-weight","600","font-family","inherit"]],template:function(o,e){1&o&&(n.YNc(0,b,14,2,"ion-header",0),n.YNc(1,U,3,2,"ion-content",1),n.TgZ(2,"ion-footer",2)(3,"ion-toolbar",3)(4,"ion-buttons",4),n.YNc(5,J,2,0,"ion-button",5),n.YNc(6,q,2,0,"ion-button",5),n.qZA(),n.TgZ(7,"ion-input",6),n.NdJ("ngModelChange",function(c){return e.messageInput=c})("ionFocus",function(){return e.toggleFocus(!0)})("ionBlur",function(){return e.toggleFocus(!1)})("keyup.enter",function(){return e.sendMessage()}),n.qZA(),n.TgZ(8,"ion-buttons",7),n.YNc(9,F,7,0,"ion-buttons",8),n.YNc(10,w,4,0,"ion-button",9),n.qZA()()()),2&o&&(n.Q6J("ngIf",e.conversationInfo),n.xp6(1),n.Q6J("ngIf",e.conversationInfo&&e.loggedUserInfo),n.xp6(4),n.Q6J("ngIf",!e.isFocus),n.xp6(1),n.Q6J("ngIf",e.isFocus),n.xp6(1),n.Q6J("ngModel",e.messageInput),n.xp6(2),n.Q6J("ngIf",""==e.messageInput),n.xp6(1),n.Q6J("ngIf",""!=e.messageInput))},dependencies:[l.mk,l.sg,l.O5,i.BJ,i.YG,i.Sm,i.W2,i.fr,i.Gu,i.gu,i.pK,i.yW,i.wd,i.sr,i.j9,m.JJ,m.On,h.L,d.X$],styles:[".chat-list[_ngcontent-%COMP%]   .chat-item[_ngcontent-%COMP%]{margin-bottom:8px}.chat-list[_ngcontent-%COMP%]   .chat-item.chat-item-sender[_ngcontent-%COMP%]{text-align:right}.chat-list[_ngcontent-%COMP%]   .chat-item.chat-item-sender[_ngcontent-%COMP%]   .chat-item-content[_ngcontent-%COMP%]{justify-content:flex-end}.chat-list[_ngcontent-%COMP%]   .chat-item.chat-item-sender[_ngcontent-%COMP%]   .chat-body[_ngcontent-%COMP%]{background:#d5d5d5;color:var(--ion-color-dark);border-radius:20px;border-color:transparent}.chat-list[_ngcontent-%COMP%]   .chat-timestamp[_ngcontent-%COMP%]{text-align:center;font-size:13px;padding:8px;color:var(--ion-color-medium);text-transform:uppercase}.chat-list[_ngcontent-%COMP%]   .chat-message-status[_ngcontent-%COMP%]{font-size:13px;color:var(--ion-color-medium);margin-right:8px}.chat-list[_ngcontent-%COMP%]   .chat-item-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-bottom:4px}.chat-list[_ngcontent-%COMP%]   .chat-item-content[_ngcontent-%COMP%]   .chat-avatar[_ngcontent-%COMP%]{margin-right:8px;align-self:flex-end}.chat-list[_ngcontent-%COMP%]   .chat-item-content[_ngcontent-%COMP%]   .chat-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:inline-block;width:100%;max-width:35px;height:35px;object-fit:cover;border-radius:50%}.chat-list[_ngcontent-%COMP%]   .chat-item-bubble[_ngcontent-%COMP%]{position:relative;max-width:75%}.chat-list[_ngcontent-%COMP%]   .chat-item-bubble[_ngcontent-%COMP%]   .chat-body[_ngcontent-%COMP%]{display:inline-block;background:var(--ion-color-light);border-radius:20px;padding:9px 16px;white-space:normal;max-width:100%;text-align:left}.chat-list[_ngcontent-%COMP%]   .chat-item-bubble.bubble-image[_ngcontent-%COMP%]{font-size:0}.chat-list[_ngcontent-%COMP%]   .chat-item-bubble.bubble-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:480px;border-radius:16px}.avatar-sm[_ngcontent-%COMP%]{width:35px;height:35px}.start-action[_ngcontent-%COMP%]{width:30px!important;height:30px!important;border-radius:50%;background-color:#045de9;background-image:linear-gradient(315deg,#045de9 0%,#09c6f9 74%);--padding-end: 5px!important;--padding-start: 5px!important}.bottom-messager[_ngcontent-%COMP%]{border:1px solid #d5d5d5;width:95%;margin:0 auto 10px;border-radius:30px;padding:0 10px;height:55px}.message-input[_ngcontent-%COMP%]{--placeholder-font-weight:100}"]}),t})(),Y=(()=>{class t{constructor(o){this.commonFunctions=o}ngOnInit(){}}return t.\u0275fac=function(o){return new(o||t)(n.Y36(v.i))},t.\u0275cmp=n.Xpm({type:t,selectors:[["conversation-item"]],inputs:{message:"message"},decls:8,vars:6,consts:[[3,"src"],[1,"time"]],template:function(o,e){1&o&&(n.TgZ(0,"ion-item")(1,"ion-avatar"),n._UZ(2,"img",0),n.qZA(),n.TgZ(3,"ion-label"),n._uU(4),n.qZA(),n.TgZ(5,"p",1),n._uU(6),n.ALo(7,"translate"),n.qZA()()),2&o&&(n.xp6(2),n.Q6J("src",e.message.avatar,n.LSH),n.xp6(2),n.hij(" ",e.message.sender," "),n.xp6(2),n.AsE("",e.commonFunctions.timeSince(e.message.time)," ",n.lcZ(7,4,"Ago"),""))},dependencies:[i.BJ,i.Ie,i.Q$,h.L,d.X$],styles:["ion-avatar[_ngcontent-%COMP%]{margin-right:10px}"]}),t})();function N(t,s){if(1&t){const o=n.EpF();n.TgZ(0,"conversation-item",11),n.NdJ("click",function(){const c=n.CHM(o).$implicit,u=n.oxw();return n.KtG(u.openConversation(c.id))}),n.qZA()}2&t&&n.Q6J("message",s.$implicit)}const k=[{path:"",component:(()=>{class t{constructor(o,e){this.modalController=o,this.dataManager=e,this.conversationValue="",this.loggedUserUsername="user123",this.conversations=[],this.conversationsSave=this.conversations,this.removeDuplicates=(a,c)=>a.reduce((u,f)=>[...u.filter(j=>j[c]!==f[c]),f],[])}ngOnInit(){this.dataManager.getConversations(o=>{this.conversations=o,this.conversationPeople=this.removeDuplicates(this.conversations,"sender"),this.conversationPeople.splice(this.conversationPeople.findIndex(({sender:e})=>e==this.loggedUserUsername),1)})}searchConversation(o){this.conversationValue=o.target.value,this.conversations=""==this.conversationValue?this.conversationsSave:this.conversations.filter(e=>e.sender.slice(0,this.conversationValue.length)===this.conversationValue)}openConversation(o){var e=this;return(0,C.Z)(function*(){return yield(yield e.modalController.create({component:Q,cssClass:"conversationPage",componentProps:{conversation:e.conversations.filter(c=>c.id==o)}})).present()})()}}return t.\u0275fac=function(o){return new(o||t)(n.Y36(i.IN),n.Y36(_.L))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-conversations"]],decls:19,vars:5,consts:[[1,"ion-no-border"],["slot","start"],["routerLink","/p/home"],["name","arrow-back-outline"],["mode","md","color","dark"],["slot","end"],["fill","clear"],["slot","icon-only","name","videocam-outline","color","dark"],["slot","icon-only","name","add-circle-outline","color","dark"],[3,"placeholder","input"],[3,"message","click",4,"ngFor","ngForOf"],[3,"message","click"]],template:function(o,e){1&o&&(n.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),n._UZ(4,"ion-icon",3),n.qZA(),n.TgZ(5,"ion-title",4),n._uU(6),n.qZA()(),n.TgZ(7,"ion-buttons",5)(8,"ion-button",6),n._UZ(9,"ion-icon",7),n.qZA(),n.TgZ(10,"ion-button",6),n._UZ(11,"ion-icon",8),n.qZA()()()(),n.TgZ(12,"ion-content")(13,"ion-header",0)(14,"ion-toolbar")(15,"ion-searchbar",9),n.NdJ("input",function(c){return e.searchConversation(c)}),n.ALo(16,"translate"),n.qZA()()(),n.TgZ(17,"ion-list"),n.YNc(18,N,1,1,"conversation-item",10),n.qZA()()),2&o&&(n.xp6(6),n.Oqu(e.loggedUserUsername),n.xp6(9),n.Q6J("placeholder",n.lcZ(16,3,"Search")),n.xp6(3),n.Q6J("ngForOf",e.conversationPeople))},dependencies:[l.sg,i.YG,i.Sm,i.W2,i.Gu,i.gu,i.q_,i.VI,i.wd,i.sr,i.j9,i.YI,g.rH,Y,d.X$],styles:["ion-searchbar[_ngcontent-%COMP%]{--box-shadow: none}ion-searchbar[_ngcontent-%COMP%]     .searchbar-clear-icon{display:none!important}ion-searchbar[_ngcontent-%COMP%]     .searchbar-input{background-color:#d5d5d5;border-radius:10px}"]}),t})()}];let S=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[g.Bz.forChild(k),g.Bz]}),t})(),L=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[l.ez,m.u5,i.Pc,S]}),t})()}}]);