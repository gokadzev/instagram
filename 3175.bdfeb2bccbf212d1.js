"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3175],{3175:(C,g,i)=>{i.r(g),i.d(g,{ReelsPageModule:()=>M});var a=i(6895),u=i(4006),r=i(877),c=i(4228),e=i(8274),h=i(2014),f=i(4354),p=i(6400),m=i(4032);const P=["sociogramVideo"];function x(o,l){1&o&&e._UZ(0,"ion-icon",25)}function _(o,l){1&o&&e._UZ(0,"ion-icon",26)}function w(o,l){if(1&o){const n=e.EpF();e.TgZ(0,"div",6)(1,"video",7,8),e.NdJ("click",function(){e.CHM(n);const s=e.oxw();return e.KtG(s.changeVideoVolume())}),e._UZ(3,"source",9),e.qZA(),e.TgZ(4,"div",10)(5,"ion-button",11),e.NdJ("click",function(){const d=e.CHM(n).$implicit,R=e.oxw();return e.KtG(R.likeReel(d))}),e.YNc(6,x,1,0,"ion-icon",12),e.YNc(7,_,1,0,"ion-icon",13),e.qZA(),e.TgZ(8,"strong",14),e._uU(9),e.qZA(),e.TgZ(10,"ion-button",15),e._UZ(11,"ion-icon",16),e.qZA(),e.TgZ(12,"ion-button",15),e._UZ(13,"ion-icon",17),e.qZA(),e.TgZ(14,"ion-button",18),e._UZ(15,"ion-icon",19),e.qZA()(),e.TgZ(16,"div",20)(17,"div",21),e._UZ(18,"img",22),e.TgZ(19,"h3"),e._uU(20),e.TgZ(21,"button",23),e._uU(22),e.ALo(23,"translate"),e.qZA()()(),e.TgZ(24,"div",24)(25,"p"),e._uU(26),e.qZA()()()()}if(2&o){const n=l.$implicit,t=e.oxw();e.Udp("height",t.pageHeight-51,"px"),e.xp6(1),e.Udp("height",t.pageHeight-51,"px"),e.Q6J("muted",t.muteStatus),e.xp6(2),e.MGl("src","",null==n?null:n.src,"#t=0.1",e.LSH),e.xp6(3),e.Q6J("ngIf",1!=(null==n?null:n.liked)),e.xp6(1),e.Q6J("ngIf",1==(null==n?null:n.liked)),e.xp6(2),e.hij(" ",t.commonFunctions.nFormatter(n.likes,1),""),e.xp6(8),e.Q6J("routerLink","/p/profile/"+(null==n?null:n.userid)),e.xp6(1),e.Q6J("src",null==n?null:n.profile_picture,e.LSH),e.xp6(2),e.hij(" ",null==n?null:n.username," "),e.xp6(2),e.Oqu(e.lcZ(23,14,"Follow")),e.xp6(4),e.Oqu(null==n?null:n.description)}}const y=[{path:"",component:(()=>{class o{constructor(n,t,s){this.dataManager=n,this.commonFunctions=t,this.changeDetectorRef=s,this.pageHeight=window.innerHeight,this.nowPlaying=null,this.muteStatus=!0,this.startIndex=0,this.endIndex=5}ngOnInit(){}ngAfterViewInit(){this.videos.changes.subscribe(n=>{this.videos=n,this.didScroll()})}loadData(){this.endIndex=this.reels.length>this.endIndex+5?this.endIndex+5:this.endIndex+(this.reels.length-this.endIndex)}ionViewDidEnter(){this.changeDetectorRef.detectChanges(),null==this.nowPlaying?this.dataManager.getReels(n=>{this.commonFunctions.getRandomElements(n,-1,t=>{this.reels=t})}):this.nowPlaying.play()}ionViewWillLeave(){this.changeDetectorRef.detach(),null!=this.nowPlaying&&this.nowPlaying.pause()}isElementInViewport(n){const t=n.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}didScroll(){this.nowPlaying&&this.isElementInViewport(this.nowPlaying)||(this.nowPlaying&&!this.isElementInViewport(this.nowPlaying)&&(this.reels[this.endIndex-2].src+"#t=0.1"==this.nowPlaying.querySelector("source").src&&this.loadData(),this.nowPlaying.pause(),this.nowPlaying=null),this.videos.forEach(n=>{if(this.nowPlaying)return;const t=n.nativeElement;this.isElementInViewport(t)&&(this.nowPlaying=t,this.nowPlaying.play())}))}likeReel(n){1!=n.liked?(n.likes+=1,n.liked=!0):(n.likes-=1,n.liked=!1)}changeVideoVolume(){this.nowPlaying.muted?(this.nowPlaying.muted=!1,this.muteStatus=!1):(this.nowPlaying.muted=!0,this.muteStatus=!0)}doRefresh(n){this.nowPlaying=null,this.ionViewDidEnter(),setTimeout(()=>{n.target.complete()},1e3)}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(h.L),e.Y36(f.i),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-reels"]],viewQuery:function(n,t){if(1&n&&e.Gf(P,5),2&n){let s;e.iGM(s=e.CRH())&&(t.videos=s)}},decls:10,vars:7,consts:[["slot","fixed",3,"ionRefresh"],[1,"reel-header"],[1,"reel-title"],["name","camera-outline"],[1,"reels-list",3,"scroll"],["class","reel",3,"height",4,"ngFor","ngForOf"],[1,"reel"],["playsinline","","loop","","preload","metadata",3,"muted","click"],["sociogramVideo",""],["type","video/mp4",3,"src"],["lines","none",1,"controllers"],["slot","start","fill","clear",1,"iconsStart","controller",3,"click"],["slot","icon-only","name","heart-outline",4,"ngIf"],["slot","icon-only","name","heart","color","danger",4,"ngIf"],[1,"controllerNumber"],["slot","start","fill","clear",1,"iconsStart","controller"],["slot","icon-only","name","chatbubble-outline"],["slot","icon-only","name","paper-plane-outline"],["slot","end","fill","clear",1,"iconsStart","controller"],["slot","icon-only","name","bookmark-outline"],[1,"reel-footer"],[1,"user-info",3,"routerLink"],["alt","",1,"user-avatar",3,"src"],[1,"follow-button"],[1,"reel-description"],["slot","icon-only","name","heart-outline"],["slot","icon-only","name","heart","color","danger"]],template:function(n,t){1&n&&(e.TgZ(0,"ion-content")(1,"ion-refresher",0),e.NdJ("ionRefresh",function(d){return t.doRefresh(d)}),e._UZ(2,"ion-refresher-content"),e.qZA(),e.TgZ(3,"div",1)(4,"h3",2),e._uU(5,"Reels"),e.qZA(),e._UZ(6,"ion-icon",3),e.qZA(),e.TgZ(7,"ion-list",4),e.NdJ("scroll",function(){return t.didScroll()}),e.YNc(8,w,27,16,"div",5),e.ALo(9,"slice"),e.qZA()()),2&n&&(e.xp6(7),e.Udp("height",t.pageHeight-51,"px"),e.xp6(1),e.Q6J("ngForOf",e.Dn7(9,3,t.reels,t.startIndex,t.endIndex)))},dependencies:[a.sg,a.O5,r.YG,r.W2,r.gu,r.q_,r.nJ,r.Wo,r.YI,c.rH,p.L,a.OU,m.X$],styles:["ion-icon[_ngcontent-%COMP%], .reel-title[_ngcontent-%COMP%]{color:#fff!important}.reels-list[_ngcontent-%COMP%]{display:grid;grid-column:auto;position:absolute;background-color:#fff;overflow-x:hidden;width:100%;padding:0;scroll-snap-type:y mandatory;scroll-behavior:smooth}.reel[_ngcontent-%COMP%]{position:relative;width:100%;background-color:#fff;scroll-snap-align:start}.reel-header[_ngcontent-%COMP%]{position:absolute;z-index:10;width:100%;display:flex;justify-content:space-between;align-items:center}.reel-header[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{padding:5px 10px}.reel-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{zoom:1.7}.reel-header[_ngcontent-%COMP%]   .reel-title[_ngcontent-%COMP%]{font-weight:600;font-family:sans-serif}.reel-footer[_ngcontent-%COMP%]{position:absolute;bottom:0;display:grid;align-items:center;margin-left:20px}.user-info[_ngcontent-%COMP%]{color:#fff;display:flex;align-items:center}.reel-description[_ngcontent-%COMP%]{color:#fff}.reel-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0;font-size:14px}.user-avatar[_ngcontent-%COMP%]{border-radius:50%;width:35px;height:35px}.user-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:15px;margin-left:10px}.user-info[_ngcontent-%COMP%]   .follow-button[_ngcontent-%COMP%]{color:#fff;font-weight:900;text-transform:inherit;background:transparent;border:1px solid white;padding:5px;border-radius:5px;margin-left:10px}.controllers[_ngcontent-%COMP%]{position:absolute;bottom:25px;right:0;display:flex;flex-wrap:wrap;width:60px}.controller[_ngcontent-%COMP%]{margin:3px 2px}.controllerNumber[_ngcontent-%COMP%]{margin:auto;color:#fff}video[_ngcontent-%COMP%]{width:99.9%;margin:auto;height:-webkit-fill-available;object-fit:cover}ion-button[_ngcontent-%COMP%]   .button-inner[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}"]}),o})()}];let v=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.Bz.forChild(y),c.Bz]}),o})(),M=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[a.ez,u.u5,r.Pc,v]}),o})()}}]);