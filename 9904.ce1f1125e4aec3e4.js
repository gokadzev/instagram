"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9904],{9904:(E,_,s)=>{s.r(_),s.d(_,{HomePageModule:()=>F});var a=s(6895),P=s(4006),c=s(877),g=s(4228),u=s(5861),n=s(8274);let f=(()=>{class o{constructor(t){this.modalController=t}ngOnInit(){}dismiss(){this.modalController.dismiss({dismissed:!0})}getDate(){var t=new Date;t.toLocaleString();var e=(t.getMonth()+1).toString(),i=t.getDate(),r=t.getFullYear();return Number(e)<10&&(e="0"+e),i<10&&(i=0+i),r.toString()+"-"+e+"-"+i}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(c.IN))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-add-post"]],decls:3,vars:0,consts:[[3,"click"]],template:function(t,e){1&t&&(n.TgZ(0,"ion-content")(1,"ion-button",0),n.NdJ("click",function(){return e.dismiss()}),n._uU(2,"Dismiss"),n.qZA()())},dependencies:[c.YG,c.W2]}),o})();var m=s(6400);function C(o,l){1&o&&n._UZ(0,"div",5)}let M=(()=>{class o{constructor(t){this.modalController=t,this.activeStoryNum=0}ngOnInit(){}ionViewDidEnter(){}nextStory(){this.stories.length-1>this.activeStoryNum?this.activeStoryNum+=1:this.activeStoryNum=0}dismiss(){this.modalController.dismiss({dismissed:!0})}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(c.IN))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-story"]],inputs:{stories:"stories",user:"user"},decls:5,vars:2,consts:[[3,"click","drag"],[1,"storynum"],["class","storyline",4,"ngFor","ngForOf"],[1,"story"],[3,"src"],[1,"storyline"]],template:function(t,e){1&t&&(n.TgZ(0,"ion-content",0),n.NdJ("click",function(){return e.nextStory()})("drag",function(){return e.dismiss()}),n.TgZ(1,"div",1),n.YNc(2,C,1,0,"div",2),n.qZA(),n.TgZ(3,"div",3),n._UZ(4,"img",4),n.qZA()()),2&t&&(n.xp6(2),n.Q6J("ngForOf",e.stories),n.xp6(2),n.Q6J("src",e.stories[e.activeStoryNum].src,n.LSH))},dependencies:[a.sg,c.W2,m.L],styles:[".storynum[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.storyline[_ngcontent-%COMP%]{width:99%;margin-left:5px;height:5px;background-color:#fff}.story[_ngcontent-%COMP%]{height:99%}.story[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:-webkit-fill-available;object-fit:cover}"]}),o})();var h=s(2014),O=s(4354),w=s(3397),p=s(9632),y=s(4032);const x=["instaVideo"];function Z(o,l){if(1&o){const t=n.EpF();n.TgZ(0,"ion-col",18),n.NdJ("click",function(){n.CHM(t);const i=n.oxw().$implicit,r=n.oxw();return n.KtG(r.openStory(null==i?null:i.id))}),n.TgZ(1,"ion-thumbnail"),n._UZ(2,"img",19),n.qZA(),n.TgZ(3,"p")(4,"ion-text",20),n._uU(5," story "),n.qZA()()()}if(2&o){const t=n.oxw().$implicit;n.xp6(2),n.Q6J("src",null==t?null:t.src,n.LSH)}}function v(o,l){1&o&&n.YNc(0,Z,6,1,"ng-template",17)}function T(o,l){if(1&o){const t=n.EpF();n.TgZ(0,"div",42),n.NdJ("dblclick",function(){n.CHM(t);const i=n.oxw().$implicit,r=n.oxw();return n.KtG(r.likePost(i))}),n._UZ(1,"img",43),n.qZA()}if(2&o){const t=n.oxw().$implicit;n.xp6(1),n.Q6J("src",null==t?null:t.src,n.LSH)}}function S(o,l){if(1&o){const t=n.EpF();n.TgZ(0,"div",44),n.NdJ("click",function(){n.CHM(t);const i=n.oxw(2);return n.KtG(i.changeVideoVolume())})("dblclick",function(){n.CHM(t);const i=n.oxw().$implicit,r=n.oxw();return n.KtG(r.likePost(i))}),n.TgZ(1,"video",45,46),n._UZ(3,"source",47),n.qZA()()}if(2&o){const t=n.oxw().$implicit,e=n.oxw();n.xp6(1),n.Q6J("muted",e.muteStatus),n.xp6(2),n.Q6J("src",null==t?null:t.src,n.LSH)}}function k(o,l){1&o&&n._UZ(0,"ion-icon",6)}function b(o,l){1&o&&n._UZ(0,"ion-icon",48)}function H(o,l){if(1&o&&(n.TgZ(0,"strong"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&o){const t=n.oxw().$implicit,e=n.oxw();n.xp6(1),n.AsE("",e.commonFunctions.nFormatter(t.likes,1)," ",n.lcZ(2,2,"Likes"),"")}}function A(o,l){if(1&o&&(n.TgZ(0,"h4",49),n._uU(1),n.qZA()),2&o){const t=n.oxw().$implicit;n.xp6(1),n.Oqu(null==t?null:t.description)}}function N(o,l){1&o&&(n.TgZ(0,"h4",49),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&o&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"No Description")))}function J(o,l){if(1&o){const t=n.EpF();n.TgZ(0,"ion-note",18),n.NdJ("click",function(){n.CHM(t);const i=n.oxw().$implicit,r=n.oxw();return n.KtG(r.toggleWrap(i))}),n._uU(1),n.ALo(2,"translate"),n.ALo(3,"translate"),n.qZA()}if(2&o){const t=n.oxw().$implicit;n.xp6(1),n.hij(" ",null!=t&&t.wrap?n.lcZ(2,1,"Less"):n.lcZ(3,3,"More")," ")}}const I=function(o){return[o]};function U(o,l){if(1&o){const t=n.EpF();n.TgZ(0,"ion-row")(1,"ion-col",21)(2,"ion-item",22)(3,"ion-avatar",23),n._UZ(4,"ion-img",24),n.qZA(),n.TgZ(5,"ion-label")(6,"strong"),n._uU(7),n.qZA(),n.TgZ(8,"p")(9,"ion-text"),n._uU(10),n.qZA()()(),n.TgZ(11,"ion-button",25),n._UZ(12,"ion-icon",26),n.qZA()(),n.YNc(13,T,2,1,"div",27),n.YNc(14,S,4,2,"div",28),n.TgZ(15,"ion-item",29)(16,"aside",30)(17,"ion-button",31),n.NdJ("click",function(){const r=n.CHM(t).$implicit,d=n.oxw();return n.KtG(d.likePost(r))}),n.YNc(18,k,1,0,"ion-icon",32),n.YNc(19,b,1,0,"ion-icon",33),n.qZA(),n.TgZ(20,"ion-button",34),n._UZ(21,"ion-icon",7),n.qZA(),n.TgZ(22,"ion-button",34),n._UZ(23,"ion-icon",35),n.qZA()(),n.TgZ(24,"ion-button",36),n._UZ(25,"ion-icon",37),n.qZA()(),n.TgZ(26,"ion-item",38)(27,"ion-label"),n.YNc(28,H,3,4,"strong",39),n.TgZ(29,"p")(30,"ion-text",20)(31,"strong"),n._uU(32),n.qZA(),n.YNc(33,A,2,1,"h4",40),n.YNc(34,N,3,3,"h4",40),n.qZA()(),n.YNc(35,J,4,5,"ion-note",41),n.qZA()()()()}if(2&o){const t=l.$implicit;n.xp6(3),n.Q6J("routerLink",n.VKq(15,I,"/p/profile/"+(null==t?null:t.userid))),n.xp6(1),n.Q6J("src",null==t?null:t.profile_picture),n.xp6(3),n.Oqu(null==t?null:t.username),n.xp6(3),n.Oqu(null==t?null:t.location),n.xp6(3),n.Q6J("ngIf",null==t?null:t.image),n.xp6(1),n.Q6J("ngIf",!(null!=t&&t.image)),n.xp6(4),n.Q6J("ngIf",null==t.liked||0==t.liked),n.xp6(1),n.Q6J("ngIf",1==t.liked),n.xp6(9),n.Q6J("ngIf",(null==t?null:t.likes)>0),n.xp6(1),n.Tol(null!=t&&t.wrap?"ion-text-wrap":"ion-text-no-wrap"),n.xp6(3),n.Oqu(null==t?null:t.username),n.xp6(1),n.Q6J("ngIf",null!=(null==t?null:t.description)),n.xp6(1),n.Q6J("ngIf",null==(null==t?null:t.description)),n.xp6(1),n.Q6J("ngIf",(null==t?null:t.description)&&null!=(null==t?null:t.description)&&t.description.length>5)}}const Q=function(){return["/p/notifications"]},Y=function(){return["/p/conversations"]},L=[{path:"",component:(()=>{class o{constructor(t,e,i,r,d){this.modalController=t,this.dataManager=e,this.commonFunctions=i,this.statusExchanger=r,this.changeDetectorRef=d,this.nowPlaying=null,this.muteStatus=!0,this.overlayActivated=!1,this.sliceNum=5,this.stories=[],this.opts={slidesPerView:this.commonFunctions.checkScreen(this.stories.length),slideShadows:!0}}ngOnInit(){this.statusExchanger.isModalOpened.subscribe(t=>{this.overlayActivated=t,this.nowPlaying&&(1==t?this.nowPlaying.pause():this.nowPlaying.play())}),this.dataManager.getLoggedInUser(t=>{this.loggedUserInfo=t}),this.dataManager.getStories(t=>{this.stories=t}),this.dataManager.getPosts(t=>{this.feeds=t})}ngOnDestroy(){this.statusExchanger.isModalOpened.unsubscribe()}ngAfterViewInit(){this.didScroll()}ionViewDidEnter(){this.changeDetectorRef.detectChanges(),null!=this.nowPlaying&&this.nowPlaying.play()}ionViewWillLeave(){this.changeDetectorRef.detach(),null!=this.nowPlaying&&this.nowPlaying.pause()}isElementInViewport(t){const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}didScroll(){this.nowPlaying&&this.isElementInViewport(this.nowPlaying)||(this.nowPlaying&&!this.isElementInViewport(this.nowPlaying)&&(this.nowPlaying.pause(),this.nowPlaying=null),this.videos.forEach(t=>{if(this.nowPlaying)return;const e=t.nativeElement;this.isElementInViewport(e)&&(this.nowPlaying=e,this.nowPlaying.play())}))}changeVideoVolume(){null!=this.nowPlaying&&(this.nowPlaying.muted?(this.nowPlaying.muted=!1,this.muteStatus=!1):(this.nowPlaying.muted=!0,this.muteStatus=!0))}doRefresh(t){this.dataManager.getStories(e=>{this.stories=e}),this.dataManager.getPosts(e=>{this.feeds=e}),setTimeout(()=>{t.target.complete()},2e3)}toggleWrap(t){t.wrap=!t.wrap}addPost(){var t=this;return(0,u.Z)(function*(){return yield(yield t.modalController.create({component:f,cssClass:"add-post-page"})).present()})()}loadData(t){setTimeout(()=>{this.sliceNum+=5,t.target.complete()},500)}toggleInfiniteScroll(){this.infiniteScroll.disabled=!this.infiniteScroll.disabled}likePost(t){1!=t.liked?(t.likes+=1,t.liked=!0):(t.likes-=1,t.liked=!1)}openStory(t){var e=this;return(0,u.Z)(function*(){let i=yield e.modalController.create({component:M,componentProps:{stories:e.stories,tapped:t}});return i.onDidDismiss().then(()=>{e.reorderStories()}),yield i.present()})()}reorderStories(){this.stories.sort((t,e)=>t.seen?1:e.seen?-1:0)}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(c.IN),n.Y36(h.L),n.Y36(O.i),n.Y36(w.O),n.Y36(n.sBO))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-home"]],viewQuery:function(t,e){if(1&t&&(n.Gf(c.ju,5),n.Gf(x,5)),2&t){let i;n.iGM(i=n.CRH())&&(e.infiniteScroll=i.first),n.iGM(i=n.CRH())&&(e.videos=i)}},decls:24,vars:15,consts:[[1,"ion-no-border"],["mode","md","color","dark"],["slot","end"],["fill","clear",3,"click"],["slot","icon-only","name","add-circle-outline","color","dark"],["button","","fill","clear",3,"routerLink"],["slot","icon-only","name","heart-outline","color","dark"],["slot","icon-only","name","chatbubble-outline","color","dark"],[1,"has-header",3,"scrollEvents","ionScroll"],[1,"stories"],[3,"config"],[4,"ngFor","ngForOf"],[1,"feedRow"],[1,"home-content"],[1,"ion-no-padding",2,"margin-bottom","0px"],["threshold","50px",3,"ionInfinite"],["loadingSpinner","bubbles",3,"loadingText"],["swiperSlide",""],[3,"click"],[1,"story-image",3,"src"],["color","dark"],["size","12"],["lines","full"],["slot","start",3,"routerLink"],[3,"src"],["slot","end","fill","clear"],["slot","icon-only","name","ellipsis-horizontal","color","dark"],["class","post",3,"dblclick",4,"ngIf"],["class","videoSize",3,"click","dblclick",4,"ngIf"],["lines","none"],[1,"left"],["slot","start","fill","clear",1,"iconsStart",3,"click"],["slot","icon-only","name","heart-outline","color","dark",4,"ngIf"],["slot","icon-only","name","heart","color","danger",4,"ngIf"],["slot","start","fill","clear",1,"iconsStart"],["slot","icon-only","name","paper-plane-outline","color","dark"],["slot","end","fill","clear",1,"iconsStart"],["slot","icon-only","name","bookmark-outline","color","dark"],["lines","none",1,"details"],[4,"ngIf"],["class","description",4,"ngIf"],[3,"click",4,"ngIf"],[1,"post",3,"dblclick"],["alt","",3,"src"],[1,"videoSize",3,"click","dblclick"],["playsinline","","loop","","preload","auto",3,"muted"],["instaVideo",""],["type","video/mp4",3,"src"],["slot","icon-only","name","heart","color","danger"],[1,"description"]],template:function(t,e){1&t&&(n.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),n._uU(3,"Sociogram"),n.qZA(),n.TgZ(4,"ion-buttons",2)(5,"ion-button",3),n.NdJ("click",function(){return e.addPost()}),n._UZ(6,"ion-icon",4),n.qZA(),n.TgZ(7,"ion-button",5),n._UZ(8,"ion-icon",6),n.qZA(),n.TgZ(9,"ion-button",5),n._UZ(10,"ion-icon",7),n.qZA()()()(),n.TgZ(11,"ion-content",8),n.NdJ("ionScroll",function(){return e.didScroll()}),n.TgZ(12,"div",9)(13,"swiper",10),n.YNc(14,v,1,0,null,11),n.qZA()(),n.TgZ(15,"ion-row",12)(16,"ion-col",13)(17,"ion-grid",14)(18,"ion-list"),n.YNc(19,U,36,17,"ion-row",11),n.ALo(20,"slice"),n.qZA(),n.TgZ(21,"ion-infinite-scroll",15),n.NdJ("ionInfinite",function(r){return e.loadData(r)}),n._UZ(22,"ion-infinite-scroll-content",16),n.ALo(23,"translate"),n.qZA()()()()()),2&t&&(n.xp6(7),n.Q6J("routerLink",n.DdM(13,Q)),n.xp6(2),n.Q6J("routerLink",n.DdM(14,Y)),n.xp6(2),n.Q6J("scrollEvents",!0),n.xp6(2),n.Q6J("config",e.opts),n.xp6(1),n.Q6J("ngForOf",e.stories),n.xp6(5),n.Q6J("ngForOf",n.Dn7(20,7,e.feeds,0,e.sliceNum)),n.xp6(3),n.Q6J("loadingText",n.lcZ(23,11,"Loading more data...")))},dependencies:[a.sg,a.O5,c.BJ,c.YG,c.Sm,c.wI,c.W2,c.jY,c.Gu,c.gu,c.Xz,c.ju,c.MB,c.Ie,c.Q$,c.q_,c.uN,c.Nd,c.yW,c.Bs,c.sr,c.wd,c.YI,p.nF,p.YC,g.rH,m.L,a.OU,y.X$],styles:["ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:40px;height:40px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]::part(native){padding:0!important}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-family:sociogram!important;font-size:1.4rem!important;font-weight:400!important}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{width:100%;margin-bottom:10vh}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{margin-bottom:5vh}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--inner-padding-end: 0 !important;--padding-start: 10px !important}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.9rem}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .iconsStart[_ngcontent-%COMP%]{margin:0 5px 0 0!important}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .iconsStart[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   div.post[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   div.post[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   div.videoSize[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:58vh!important}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   div.post[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   div.videoSize[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{object-fit:cover}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   div.post[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:100%}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item.details[_ngcontent-%COMP%]{min-height:0!important;--padding-start: 10px !important;--padding-end: 10px !important}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item.details[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-top:0!important}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item.details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:3px}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item.details[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-item.details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}.feedRow[_ngcontent-%COMP%]{width:100%;max-width:935px;padding:0 0 8px;margin:0 auto;display:flex}.home-content[_ngcontent-%COMP%]{width:100%;max-width:614px;margin:0 auto;display:flex;flex-direction:column}.stories[_ngcontent-%COMP%]{border:1px solid rgba(161,161,161,.3607843137)}"]}),o})()}];let q=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[g.Bz.forChild(L),g.Bz]}),o})(),F=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[a.ez,P.u5,c.Pc,q]}),o})()}}]);