"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8259],{8259:(T,m,r)=>{r.r(m),r.d(m,{HomePageModule:()=>E});var a=r(177),p=r(9417),s=r(480),d=r(1470),h=r(467),n=r(4438);function _(i,c){1&i&&n.nrm(0,"div",5)}let f=(()=>{class i{constructor(t){this.modalController=t,this.activeStoryNum=0}ngOnInit(){}ionViewDidEnter(){}nextStory(){this.stories.length-1>this.activeStoryNum?this.activeStoryNum+=1:this.activeStoryNum=0}dismiss(){this.modalController.dismiss({dismissed:!0})}static#n=this.\u0275fac=function(e){return new(e||i)(n.rXU(s.W3))};static#t=this.\u0275cmp=n.VBU({type:i,selectors:[["app-story"]],inputs:{stories:"stories",user:"user"},standalone:!0,features:[n.aNF],decls:5,vars:2,consts:[[3,"click","drag"],[1,"storynum"],["class","storyline",4,"ngFor","ngForOf"],[1,"story"],[3,"src"],[1,"storyline"]],template:function(e,o){1&e&&(n.j41(0,"ion-content",0),n.bIt("click",function(){return o.nextStory()})("drag",function(){return o.dismiss()}),n.j41(1,"div",1),n.DNE(2,_,1,0,"div",2),n.k0s(),n.j41(3,"div",3),n.nrm(4,"img",4),n.k0s()()),2&e&&(n.R7$(2),n.Y8G("ngForOf",o.stories),n.R7$(2),n.Y8G("src",o.stories[o.activeStoryNum].src,n.B4B))},dependencies:[s.bv,s.W9,a.pM],styles:[".storynum[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.storyline[_ngcontent-%COMP%]{width:99%;margin-left:5px;height:5px;background-color:#fff}.story[_ngcontent-%COMP%]{height:99%}.story[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:-webkit-fill-available;object-fit:cover}"]})}return i})();var g=r(5694),k=r(6863),P=r(8879),y=r(7984);const w=["instaVideo"],v=()=>["/p/notifications"],b=()=>["/p/conversations"],M=i=>[i];function R(i,c){if(1&i){const t=n.RV6();n.j41(0,"swiper-slide")(1,"ion-col",19),n.bIt("click",function(){const o=n.eBV(t).$implicit,l=n.XpG();return n.Njj(l.openStory(null==o?null:o.id))}),n.j41(2,"ion-thumbnail"),n.nrm(3,"img",20),n.k0s(),n.j41(4,"p")(5,"ion-text",11),n.EFF(6," story "),n.k0s()()()()}if(2&i){const t=c.$implicit;n.R7$(3),n.Y8G("src",null==t?null:t.src,n.B4B)}}function j(i,c){if(1&i){const t=n.RV6();n.j41(0,"div",43),n.bIt("dblclick",function(){n.eBV(t);const o=n.XpG().$implicit,l=n.XpG();return n.Njj(l.likePost(o))}),n.nrm(1,"img",44),n.k0s()}if(2&i){const t=n.XpG().$implicit;n.R7$(),n.Y8G("src",null==t?null:t.src,n.B4B)}}function C(i,c){if(1&i){const t=n.RV6();n.j41(0,"div",45),n.bIt("click",function(){n.eBV(t);const o=n.XpG(2);return n.Njj(o.changeVideoVolume())})("dblclick",function(){n.eBV(t);const o=n.XpG().$implicit,l=n.XpG();return n.Njj(l.likePost(o))}),n.j41(1,"video",46,0),n.nrm(3,"source",47),n.k0s()()}if(2&i){const t=n.XpG().$implicit,e=n.XpG();n.R7$(),n.Y8G("muted",e.muteStatus),n.R7$(2),n.Y8G("src",null==t?null:t.src,n.B4B)}}function I(i,c){if(1&i&&(n.j41(0,"strong"),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&i){const t=n.XpG().$implicit,e=n.XpG();n.R7$(),n.Lme("",e.commonFunctions.nFormatter(t.likes,1)," ",n.bMT(2,2,"Likes"),"")}}function G(i,c){if(1&i&&(n.j41(0,"h4",48),n.EFF(1),n.k0s()),2&i){const t=n.XpG().$implicit;n.R7$(),n.SpI(" ",null==t?null:t.description," ")}}function $(i,c){1&i&&(n.j41(0,"h4",48),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&i&&(n.R7$(),n.SpI(" ",n.bMT(2,1,"No Description")," "))}function S(i,c){if(1&i){const t=n.RV6();n.j41(0,"ion-note",19),n.bIt("click",function(){n.eBV(t);const o=n.XpG().$implicit,l=n.XpG();return n.Njj(l.toggleWrap(o))}),n.EFF(1),n.nI1(2,"translate"),n.nI1(3,"translate"),n.k0s()}if(2&i){const t=n.XpG().$implicit;n.R7$(),n.SpI(" ",null!=t&&t.wrap?n.bMT(2,1,"Less"):n.bMT(3,3,"More")," ")}}function x(i,c){if(1&i){const t=n.RV6();n.j41(0,"ion-row",21)(1,"ion-col",22)(2,"ion-item",23)(3,"ion-avatar",24),n.nrm(4,"ion-img",25),n.k0s(),n.j41(5,"ion-label")(6,"strong"),n.EFF(7),n.k0s(),n.j41(8,"p")(9,"ion-text"),n.EFF(10),n.k0s()()(),n.j41(11,"ion-button",26),n.nrm(12,"ion-icon",27),n.k0s()(),n.DNE(13,j,2,1,"div",28)(14,C,4,2,"div",29),n.j41(15,"ion-item",30)(16,"aside",31)(17,"ion-button",32),n.bIt("click",function(){const o=n.eBV(t).$implicit,l=n.XpG();return n.Njj(l.likePost(o))}),n.nrm(18,"ion-icon",33),n.k0s(),n.j41(19,"ion-button",34),n.nrm(20,"ion-icon",35),n.k0s(),n.j41(21,"ion-button",34),n.nrm(22,"ion-icon",6),n.k0s()(),n.j41(23,"ion-button",36),n.nrm(24,"ion-icon",37),n.k0s()(),n.j41(25,"ion-item",38)(26,"ion-label"),n.DNE(27,I,3,4,"strong",39),n.j41(28,"p")(29,"ion-text",40)(30,"strong"),n.EFF(31),n.k0s(),n.DNE(32,G,2,1,"h4",41)(33,$,3,3,"h4",41),n.k0s()(),n.DNE(34,S,4,5,"ion-note",42),n.k0s()()()()}if(2&i){const t=c.$implicit;n.R7$(3),n.Y8G("routerLink",n.eq3(15,M,"/p/profile/"+(null==t?null:t.userid))),n.R7$(),n.Y8G("src",null==t?null:t.profile_picture),n.R7$(3),n.JRh(null==t?null:t.username),n.R7$(3),n.JRh(null==t?null:t.location),n.R7$(3),n.Y8G("ngIf",null==t?null:t.image),n.R7$(),n.Y8G("ngIf",!(null!=t&&t.image)),n.R7$(4),n.Y8G("color",null!=t&&t.liked?"danger":"dark")("name",null!=t&&t.liked?"heart":"heart-outline"),n.R7$(9),n.Y8G("ngIf",(null==t?null:t.likes)>0),n.R7$(),n.HbH(null!=t&&t.wrap?"ion-text-wrap":"ion-text-no-wrap"),n.R7$(3),n.JRh(null==t?null:t.username),n.R7$(),n.Y8G("ngIf",null!=(null==t?null:t.description)),n.R7$(),n.Y8G("ngIf",null==(null==t?null:t.description)),n.R7$(),n.Y8G("ngIf",(null==t?null:t.description)&&null!=(null==t?null:t.description)&&t.description.length>5)}}const O=[{path:"",component:(()=>{class i{constructor(t,e,o,l,u){this.modalController=t,this.dataManager=e,this.commonFunctions=o,this.statusExchanger=l,this.changeDetectorRef=u,this.nowPlaying=null,this.muteStatus=!0,this.overlayActivated=!1,this.sliceNum=5,this.stories=[]}ngOnInit(){this.statusExchanger.isModalOpened.subscribe(t=>{this.overlayActivated=t,this.nowPlaying&&(1==t?this.nowPlaying.pause():this.nowPlaying.play())}),this.dataManager.getLoggedInUser(t=>{this.loggedUserInfo=t}),this.dataManager.getStories(t=>{this.stories=t,this.slidesPerView=this.commonFunctions.checkScreen(this.stories.length)}),this.dataManager.getPosts(t=>{this.feeds=t})}ngOnDestroy(){this.statusExchanger.isModalOpened.unsubscribe()}ngAfterViewInit(){this.didScroll()}ionViewDidEnter(){this.changeDetectorRef.detectChanges(),null!=this.nowPlaying&&this.nowPlaying.play()}ionViewWillLeave(){this.changeDetectorRef.detach(),null!=this.nowPlaying&&this.nowPlaying.pause()}isElementInViewport(t){const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}didScroll(){this.nowPlaying&&this.isElementInViewport(this.nowPlaying)||(this.nowPlaying&&!this.isElementInViewport(this.nowPlaying)&&(this.nowPlaying.pause(),this.nowPlaying=null),this.videos.forEach(t=>{if(this.nowPlaying)return;const e=t.nativeElement;this.isElementInViewport(e)&&(this.nowPlaying=e,this.nowPlaying.play())}))}changeVideoVolume(){null!=this.nowPlaying&&(this.nowPlaying.muted?(this.nowPlaying.muted=!1,this.muteStatus=!1):(this.nowPlaying.muted=!0,this.muteStatus=!0))}doRefresh(t){this.dataManager.getStories(e=>{this.stories=e}),this.dataManager.getPosts(e=>{this.feeds=e}),setTimeout(()=>{t.target.complete()},2e3)}toggleWrap(t){t.wrap=!t.wrap}loadData(t){setTimeout(()=>{this.sliceNum+=5,t.target.complete()},500)}toggleInfiniteScroll(){this.infiniteScroll.disabled=!this.infiniteScroll.disabled}likePost(t){1!=t.liked?(t.likes+=1,t.liked=!0):(t.likes-=1,t.liked=!1)}openStory(t){var e=this;return(0,h.A)(function*(){let o=yield e.modalController.create({component:f,componentProps:{stories:e.stories,tapped:t}});return o.onDidDismiss().then(()=>{e.reorderStories()}),yield o.present()})()}reorderStories(){this.stories.sort((t,e)=>t.seen?1:e.seen?-1:0)}static#n=this.\u0275fac=function(e){return new(e||i)(n.rXU(s.W3),n.rXU(k.j),n.rXU(P.k),n.rXU(y.r),n.rXU(n.gRc))};static#t=this.\u0275cmp=n.VBU({type:i,selectors:[["app-home"]],viewQuery:function(e,o){if(1&e&&(n.GBs(s.Ax,5),n.GBs(w,5)),2&e){let l;n.mGM(l=n.lsd())&&(o.infiniteScroll=l.first),n.mGM(l=n.lsd())&&(o.videos=l)}},standalone:!0,features:[n.aNF],decls:30,vars:19,consts:[["instaVideo",""],[1,"ion-no-border"],["mode","md","color","dark"],["slot","end"],["button","","fill","clear",3,"routerLink"],["slot","icon-only","name","heart-outline","color","dark"],["slot","icon-only","name","paper-plane-outline","color","dark"],[1,"has-header",3,"ionScroll","scrollEvents"],[1,"stories"],[3,"slides-per-view","allowSlideNext"],["name","add","color","dark"],["color","dark"],[4,"ngFor","ngForOf"],[1,"feedRow"],[1,"home-content"],[1,"ion-no-padding",2,"margin-bottom","0px"],["class","postClass",4,"ngFor","ngForOf"],["threshold","50px",3,"ionInfinite"],["loadingSpinner","bubbles",3,"loadingText"],[3,"click"],[1,"story-image",3,"src"],[1,"postClass"],["size","12"],["lines","full"],["slot","start",3,"routerLink"],[3,"src"],["slot","end","fill","clear"],["slot","icon-only","name","ellipsis-vertical","color","dark",2,"font-size","16px"],["class","post",3,"dblclick",4,"ngIf"],["class","videoSize",3,"click","dblclick",4,"ngIf"],["lines","none"],[1,"left"],["slot","start","fill","clear",1,"iconsStart",3,"click"],["slot","icon-only",1,"likeButton",3,"color","name"],["slot","start","fill","clear",1,"iconsStart"],["slot","icon-only","name","chatbubble-outline","color","dark"],["slot","end","fill","clear",1,"iconsStart"],["slot","icon-only","name","bookmark-outline","color","dark"],["lines","none",1,"details"],[4,"ngIf"],["color","dark",1,"userAndDesc"],["class","description",4,"ngIf"],[3,"click",4,"ngIf"],[1,"post",3,"dblclick"],["alt","",3,"src"],[1,"videoSize",3,"click","dblclick"],["playsinline","","loop","","preload","auto",3,"muted"],["type","video/mp4",3,"src"],[1,"description"]],template:function(e,o){1&e&&(n.j41(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-title",2),n.EFF(3,"Instagram"),n.k0s(),n.j41(4,"ion-buttons",3)(5,"ion-button",4),n.nrm(6,"ion-icon",5),n.k0s(),n.j41(7,"ion-button",4),n.nrm(8,"ion-icon",6),n.k0s()()()(),n.j41(9,"ion-content",7),n.bIt("ionScroll",function(){return o.didScroll()}),n.j41(10,"div",8)(11,"swiper-container",9)(12,"swiper-slide")(13,"ion-col")(14,"ion-thumbnail"),n.nrm(15,"ion-icon",10),n.k0s(),n.j41(16,"p")(17,"ion-text",11),n.EFF(18),n.nI1(19,"translate"),n.k0s()()()(),n.DNE(20,R,7,1,"swiper-slide",12),n.k0s()(),n.j41(21,"ion-row",13)(22,"ion-col",14)(23,"ion-grid",15)(24,"ion-list"),n.DNE(25,x,35,17,"ion-row",16),n.nI1(26,"slice"),n.k0s(),n.j41(27,"ion-infinite-scroll",17),n.bIt("ionInfinite",function(u){return o.loadData(u)}),n.nrm(28,"ion-infinite-scroll-content",18),n.nI1(29,"translate"),n.k0s()()()()()),2&e&&(n.R7$(5),n.Y8G("routerLink",n.lJ4(17,v)),n.R7$(2),n.Y8G("routerLink",n.lJ4(18,b)),n.R7$(2),n.Y8G("scrollEvents",!0),n.R7$(2),n.Y8G("slides-per-view",o.slidesPerView)("allowSlideNext",o.stories.length>=4),n.R7$(7),n.JRh(n.bMT(19,9,"New")),n.R7$(2),n.Y8G("ngForOf",o.stories),n.R7$(5),n.Y8G("ngForOf",n.brH(26,11,o.feeds,0,o.sliceNum)),n.R7$(3),n.Y8G("loadingText",n.bMT(29,15,"Loading more data...")))},dependencies:[s.bv,s.mC,s.Jm,s.QW,s.hU,s.W9,s.lO,s.eU,s.iq,s.KW,s.Ax,s.Hp,s.uz,s.he,s.nf,s.JI,s.ln,s.IO,s.Zx,s.BC,s.ai,s.N7,d.Wk,a.pM,a.bT,a.P9,g.h,g.D9],styles:["ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:40px;height:40px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:25px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]::part(native){padding:0!important}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-family:instagram!important;font-size:1.4rem!important;font-weight:400!important;padding-inline:5px}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{width:100%;margin-bottom:10vh}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{margin-bottom:5vh}.feedRow[_ngcontent-%COMP%]{width:100%;max-width:935px;padding:0 0 8px;margin:0 auto;display:flex}.home-content[_ngcontent-%COMP%]{width:100%;max-width:614px;margin:0 auto;display:flex;flex-direction:column;padding:unset}.likeButton[_ngcontent-%COMP%]{transition:all .3s ease}"]})}return i})()}];let F=(()=>{class i{static#n=this.\u0275fac=function(e){return new(e||i)};static#t=this.\u0275mod=n.$C({type:i});static#i=this.\u0275inj=n.G2t({imports:[d.iI.forChild(O),d.iI]})}return i})(),E=(()=>{class i{static#n=this.\u0275fac=function(e){return new(e||i)};static#t=this.\u0275mod=n.$C({type:i});static#i=this.\u0275inj=n.G2t({imports:[a.MD,p.YN,s.bv,F]})}return i})()}}]);